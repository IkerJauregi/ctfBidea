"use strict";(self.webpackChunkctf_bidea=self.webpackChunkctf_bidea||[]).push([[842],{2942:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"maquinas/juice-shop/zero-stars","title":"Zero Stars - Improper Input Validation","description":"Objetivo: Enviar una rese\xf1a de 0 estrellas en la secci\xf3n de feedback de OWASP Juice Shop, sorteando la validaci\xf3n del cliente (frontend).","source":"@site/docs/maquinas/juice-shop/zero-stars.md","sourceDirName":"maquinas/juice-shop","slug":"/maquinas/juice-shop/zero-stars","permalink":"/docs/maquinas/juice-shop/zero-stars","draft":false,"unlisted":false,"editUrl":"https://github.com/IkerJauregi/ctfBidea/edit/main/docs/maquinas/juice-shop/zero-stars.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"OWASP Juice Shop - Introducci\xf3n","permalink":"/docs/maquinas/juice-shop/intro"},"next":{"title":"intro","permalink":"/docs/maquinas/vulnhub/intro"}}');var s=a(4848),i=a(8453);const o={},c="Zero Stars - Improper Input Validation",t={},d=[{value:"1. Acceder a la secci\xf3n de Feedbacks",id:"1-acceder-a-la-secci\xf3n-de-feedbacks",level:2},{value:"2. Interceptar la petici\xf3n con Burp Suite",id:"2-interceptar-la-petici\xf3n-con-burp-suite",level:2},{value:"3. Enviar la petici\xf3n modificada desde Repeater",id:"3-enviar-la-petici\xf3n-modificada-desde-repeater",level:2},{value:"4. Verificar la respuesta del servidor",id:"4-verificar-la-respuesta-del-servidor",level:2},{value:"\ud83d\udee1\ufe0f \xbfComo securizarlo?",id:"\ufe0f-como-securizarlo",level:2}];function l(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"zero-stars---improper-input-validation",children:"Zero Stars - Improper Input Validation"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Objetivo:"})," Enviar una rese\xf1a de 0 estrellas en la secci\xf3n de feedback de ",(0,s.jsx)(n.strong,{children:"OWASP Juice Shop"}),", sorteando la validaci\xf3n del cliente (",(0,s.jsx)(n.em,{children:"frontend"}),")."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["El ejercicio nos indica que debemos enviar una rese\xf1a con ",(0,s.jsx)(n.strong,{children:"0 estrellas"}),", algo que normalmente no est\xe1 permitido desde el frontend. Por lo tanto, debemos encontrar la secci\xf3n de la web donde se gestionan los ",(0,s.jsx)(n.em,{children:"feedbacks"})," y manipular la petici\xf3n que se env\xeda al servidor."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"1-acceder-a-la-secci\xf3n-de-feedbacks",children:"1. Acceder a la secci\xf3n de Feedbacks"}),"\n",(0,s.jsxs)(n.p,{children:["Abrimos el men\xfa de navegaci\xf3n de la aplicaci\xf3n y buscamos la secci\xf3n llamada ",(0,s.jsx)(n.strong,{children:'"Feedbacks"'}),". Aqu\xed se nos presenta un formulario donde podemos introducir un comentario, nombre, correo electr\xf3nico y seleccionar una valoraci\xf3n en forma de estrellas."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:a(4202).A+"",width:"1809",height:"646"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-interceptar-la-petici\xf3n-con-burp-suite",children:"2. Interceptar la petici\xf3n con Burp Suite"}),"\n",(0,s.jsxs)(n.p,{children:["Antes de enviar el formulario, activamos ",(0,s.jsx)(n.strong,{children:"Burp Suite"})," en modo ",(0,s.jsx)(n.em,{children:"Intercept"})," para capturar la solicitud HTTP que se genera al hacer clic en el bot\xf3n ",(0,s.jsx)(n.strong,{children:"Submit"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Una vez enviada, capturamos una ",(0,s.jsx)(n.strong,{children:"petici\xf3n POST"})," que contiene los datos del formulario. Confirmamos que es la petici\xf3n correcta revisando los campos en el cuerpo del mensaje, como ",(0,s.jsx)(n.code,{children:"comment"})," y especialmente ",(0,s.jsx)(n.code,{children:"rating"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:a(7205).A+"",width:"1223",height:"567"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-enviar-la-petici\xf3n-modificada-desde-repeater",children:"3. Enviar la petici\xf3n modificada desde Repeater"}),"\n",(0,s.jsxs)(n.p,{children:["Con la petici\xf3n seleccionada, hacemos clic derecho y la enviamos al ",(0,s.jsx)(n.strong,{children:"Repeater"})," de Burp Suite. Aqu\xed podremos modificar los datos manualmente y reenviar la solicitud tantas veces como queramos."]}),"\n",(0,s.jsxs)(n.p,{children:["Editamos el campo ",(0,s.jsx)(n.code,{children:"rating"})," y lo modificamos a:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\r\n  "captchaId": 1,\r\n  "captcha": "-5",\r\n  "comment": "test (anonymous)",\r\n  "rating": "0"\r\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Esto nos permite eludir la validaci\xf3n del frontend ya que estamos manipulando los datos despues de haber pasado todos los controles de los datos en el formulario."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-verificar-la-respuesta-del-servidor",children:"4. Verificar la respuesta del servidor"}),"\n",(0,s.jsxs)(n.p,{children:["Al hacer clic en ",(0,s.jsx)(n.strong,{children:"Send"}),", recibimos una respuesta que contiene:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:a(7572).A+"",width:"1161",height:"548"})}),"\n",(0,s.jsxs)(n.p,{children:["Esto confirma que el servidor ha aceptado la rese\xf1a con ",(0,s.jsx)(n.strong,{children:"0 estrellas"}),", lo cual demuestra que ",(0,s.jsx)(n.strong,{children:"no existe validaci\xf3n del lado del servidor"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-como-securizarlo",children:"\ud83d\udee1\ufe0f \xbfComo securizarlo?"}),"\n",(0,s.jsxs)(n.p,{children:["Este fallo ocurre porque el servidor ",(0,s.jsxs)(n.strong,{children:["no valida correctamente el valor del campo ",(0,s.jsx)(n.code,{children:"rating"})]}),", permitiendo que se env\xeden datos manipulados desde el cliente (como ",(0,s.jsx)(n.code,{children:"rating=0"}),") y los procese como v\xe1lidos."]}),"\n",(0,s.jsxs)(n.p,{children:["Aunque el formulario del frontend (Angular) limite la selecci\xf3n de estrellas, ",(0,s.jsx)(n.strong,{children:"el backend en Node.js (Express) deber\xeda validar todos los datos antes de procesarlos"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["En este caso, se recomienda implementar una validaci\xf3n en el backend que asegure que el valor de ",(0,s.jsx)(n.code,{children:"rating"})," est\xe9 dentro del rango permitido (por ejemplo, entre 1 y 5). "]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},4202:(e,n,a)=>{a.d(n,{A:()=>r});const r=a.p+"assets/images/customerFeedbackSubmit-4b76c773594f7d3a0cf0e799a5605a2c.png"},7205:(e,n,a)=>{a.d(n,{A:()=>r});const r=a.p+"assets/images/capturaPaqueteBurp-ea0f5a7cdc45890d48bd0226877e4119.png"},7572:(e,n,a)=>{a.d(n,{A:()=>r});const r=a.p+"assets/images/Respuestasuccess-b04687c7cf4cdfb5f08265dfedad083a.png"},8453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>c});var r=a(6540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);